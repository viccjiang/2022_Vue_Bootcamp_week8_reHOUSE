(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f72e85b"],{1799:function(e,t,c){"use strict";var o=c("7a23"),n={"aria-label":"Page navigation example"},a={class:"pagination justify-content-center"},i=Object(o["createElementVNode"])("span",{"aria-hidden":"true"},"«",-1),r=[i],s=["onClick"],l=Object(o["createElementVNode"])("span",{"aria-hidden":"true"},"»",-1),d=[l];function u(e,t,c,i,l,u){return Object(o["openBlock"])(),Object(o["createElementBlock"])("nav",n,[Object(o["createElementVNode"])("ul",a,[Object(o["createElementVNode"])("li",{class:Object(o["normalizeClass"])(["page-item",{disabled:!c.pages.has_pre}])},[Object(o["createElementVNode"])("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:t[0]||(t[0]=Object(o["withModifiers"])((function(e){return u.updatePage(c.pages.current_page-1)}),["prevent"]))},r)],2),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(c.pages.total_pages,(function(e){return Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{class:Object(o["normalizeClass"])(["page-item",{active:e===c.pages.current_page}]),key:e},[Object(o["createElementVNode"])("a",{class:"page-link",href:"#",onClick:Object(o["withModifiers"])((function(t){return u.updatePage(e)}),["prevent"])},Object(o["toDisplayString"])(e),9,s)],2)})),128)),Object(o["createElementVNode"])("li",{class:Object(o["normalizeClass"])(["page-item",{disabled:!c.pages.has_next}])},[Object(o["createElementVNode"])("a",{class:"page-link",href:"#","aria-label":"Next",onClick:t[1]||(t[1]=Object(o["withModifiers"])((function(e){return u.updatePage(c.pages.current_page+1)}),["prevent"]))},d)],2)])])}var b={props:["pages"],methods:{updatePage:function(e){this.$emit("emit-pages",e)}}},m=c("6b0d"),p=c.n(m);const g=p()(b,[["render",u]]);t["a"]=g},"3e2b":function(e,t,c){"use strict";c.r(t);c("caad"),c("2532");var o=c("7a23"),n=Object(o["createElementVNode"])("div",{class:"card border-0 rounded-0 bg-dark text-white"},[Object(o["createElementVNode"])("img",{class:"filters",style:{height:"200px","background-image":"url(https://images.unsplash.com/photo-1616627408664-00fa6151580c?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80)","background-size":"cover","background-position":"center bottom","background-attachment":"fixed"}}),Object(o["createElementVNode"])("div",{class:"card-img-overlay d-flex flex-column justify-content-center align-item-center"},[Object(o["createElementVNode"])("h1",{class:"card-title text-center fw-bold"},"產品列表")])],-1),a={class:"container mt-0 mt-md-3"},i={class:"row flex-column flex-md-row"},r={class:"subNav sticky-top col-12 mt-4 flex-column flex-md-row border-0"},s={class:"list-group rounded-0 list-group-horizontal"},l=["onClick"],d={class:"col-12"},u={class:"row mt-4"},b={class:"col mb-4"},m={class:"row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4"},p={class:"card h-100 rounded-0 position-relative"},g=["onClick"],f={key:0,class:"fs-4 bi-suit-heart-fill position-absolute top-0 end-0 me-2 mt-1 text-danger"},j={key:1,class:"fs-4 bi bi-suit-heart position-absolute top-0 end-0 me-2 mt-1 text-white"},O=["onClick"],h={class:"card-body"},v={class:"d-flex mb-4"},k={class:"badge bg-soft text-center text-light"},y={class:"card-title mb-3"},E={class:"mb-3 d-flex flex-column justify-content-end align-items-end"},N={key:0,class:"h5 list-inline-item"},V={key:1,class:"fs-7 list-inline-item text-secondary"},x={key:2,class:"fs-4 text-danger"},w={class:"d-grid d-md-flex justify-content-md-between"},C=["onClick"],B=["disabled","onClick"],F={key:0,class:"spinner-border text-light spinner-border-sm",role:"status"},P=Object(o["createElementVNode"])("span",{class:"visually-hidden"},"Loading...",-1),S=[P],M=Object(o["createTextVNode"])(" 加到購物車");function D(e,t,c,P,D,$){var _=this,z=Object(o["resolveComponent"])("Loading"),I=Object(o["resolveComponent"])("Pagination");return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[Object(o["createVNode"])(z,{active:e.isLoading,loader:"bars",color:"#236F6B"},null,8,["active"]),n,Object(o["createElementVNode"])("div",a,[Object(o["createElementVNode"])("div",i,[Object(o["createElementVNode"])("div",r,[Object(o["createElementVNode"])("div",s,[Object(o["createElementVNode"])("a",{href:"#",class:"list-group-item list-group-item-action rounded-0",onClick:t[0]||(t[0]=Object(o["withModifiers"])((function(e){return D.selectCategory=""}),["prevent"]))},"全部"),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(D.categories,(function(e){return Object(o["openBlock"])(),Object(o["createElementBlock"])("a",{href:"#",key:e,class:"list-group-item list-group-item-action rounded-0",onClick:Object(o["withModifiers"])((function(t){return D.selectCategory=e}),["prevent"])},Object(o["toDisplayString"])(e),9,l)})),128))])]),Object(o["createElementVNode"])("div",d,[Object(o["createElementVNode"])("div",u,[Object(o["createElementVNode"])("div",b,[Object(o["createElementVNode"])("div",m,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])($.filterProducts,(function(t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:"col",key:t.id},[Object(o["createElementVNode"])("div",p,[Object(o["createElementVNode"])("a",{onClick:function(e){return $.addMyFavorite(t)},class:Object(o["normalizeClass"])([{active:D.myFavorite.includes(t.id)},"link-secondary d-block rounded-0"])},[D.myFavorite.includes(t.id)?(Object(o["openBlock"])(),Object(o["createElementBlock"])("i",f)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("i",j))],10,g),Object(o["createElementVNode"])("a",{href:"#",class:"rounded-0",onClick:Object(o["withModifiers"])((function(e){return $.getProduct(t.id)}),["prevent"])},[Object(o["createElementVNode"])("div",{style:Object(o["normalizeStyle"])([{height:"300px","background-size":"cover","background-position":"center"},{backgroundImage:"url(".concat(t.imageUrl,")")}])},null,4)],8,O),Object(o["createElementVNode"])("div",h,[Object(o["createElementVNode"])("div",v,[Object(o["createElementVNode"])("p",k,Object(o["toDisplayString"])(t.category),1),Object(o["createElementVNode"])("h5",y,Object(o["toDisplayString"])(t.title),1)]),Object(o["createElementVNode"])("div",E,[t.price?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",N,Object(o["toDisplayString"])(t.origin_price)+" 元 ",1)),t.price?(Object(o["openBlock"])(),Object(o["createElementBlock"])("del",V,"原價 NT$ "+Object(o["toDisplayString"])(e.$filters.currency(t.origin_price))+" 元",1)):Object(o["createCommentVNode"])("",!0),t.price?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",x," NT$ "+Object(o["toDisplayString"])(e.$filters.currency(t.price))+" 元 ",1)):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",w,[Object(o["createElementVNode"])("button",{class:"btn btn-outline-secondary rounded-0 border w-100",type:"button",onClick:function(e){return $.getProduct(t.id)}},"查看更多",8,C),Object(o["createElementVNode"])("button",{class:"btn btn-soft text-light rounded-0 border-0 w-100",type:"button",disabled:_.status.loadingItem===t.id,onClick:function(e){return $.addCart(t.id)}},[_.status.loadingItem===t.id?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",F,S)):Object(o["createCommentVNode"])("",!0),M],8,B)])])])])})),128))])]),Object(o["createVNode"])(I,{class:"d-flex justify-content-center justify-content-md-end",pages:D.pagination,onEmitPages:$.getProducts},null,8,["pages","onEmitPages"])])])])])],64)}var $=c("2909"),_=(c("e9c4"),c("a434"),c("99af"),c("d3b7"),c("6062"),c("3ca3"),c("ddb0"),c("159b"),c("4de4"),c("ac1f"),c("466d"),c("cfb9")),z=c("1799"),I={save:function(e){var t=JSON.stringify(e);localStorage.setItem("hexFavorite",t)},get:function(){return JSON.parse(localStorage.getItem("hexFavorite"))}},L={data:function(){return{products:[],product:{},pagination:{},status:{loadingItem:""},categories:[],selectCategory:"",myFavorite:I.get()||[]}},components:{Pagination:z["a"]},provide:function(){return{emitter:_["a"]}},methods:{addMyFavorite:function(e){this.myFavorite.includes(e.id)?this.myFavorite.splice(this.myFavorite.indexOf(e.id),1):this.myFavorite.push(e.id),console.log("myFavorite 我的最愛數量",this.myFavorite.length)},getProducts:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,c="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("jiangs2022vue3","/products/?page=").concat(t);this.isLoading=!0,this.$http.get(c).then((function(t){console.log("取得 response：",t),e.products=t.data.products,e.isLoading=!1,t.data.success&&(console.log("取得所有產品：",t.data),e.products=t.data.products,e.pagination=t.data.pagination,e.getCategories())}))},getCategories:function(){var e=new Set;this.products.forEach((function(t){e.add(t.category)})),console.log("取得所有分類 Set：",e),this.categories=Object($["a"])(e),console.log("取得所有分類 Proxy：",this.categories)},getProduct:function(e){this.$router.push("/product/".concat(e))},addCart:function(e){var t=this,c="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("jiangs2022vue3","/cart");this.status.loadingItem=e;var o={product_id:e,qty:1};this.$http.post(c,{data:o}).then((function(e){t.status.loadingItem="",t.showAlert(),console.log(e),_["a"].emit("update-cart")}))},showAlert:function(){this.$swal.fire({position:"center",icon:"success",title:"已加入購物車",showConfirmButton:!1,timer:2e3,iconColor:"#236F6B"})}},watch:{myFavorite:{handler:function(){I.save(this.myFavorite),_["a"].emit("update-favorite")},deep:!0}},computed:{filterProducts:function(){var e=this;return this.products.filter((function(t){return t.category.match(e.selectCategory)}))}},created:function(){this.getProducts()}},J=(c("5ff3"),c("6b0d")),A=c.n(J);const H=A()(L,[["render",D]]);t["default"]=H},"5ff3":function(e,t,c){"use strict";c("d0a4")},d0a4:function(e,t,c){}}]);
//# sourceMappingURL=chunk-4f72e85b.2d2d2baf.js.map