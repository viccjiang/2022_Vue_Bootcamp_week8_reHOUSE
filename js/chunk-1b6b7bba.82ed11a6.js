(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b6b7bba"],{"0ac1":function(e,t,c){"use strict";c.r(t);c("b0c0");var n=c("7a23"),o={class:"container mt-5"},r={key:0,class:"mb-10 text-center text-soft"},l={key:1,class:"mb-10 text-center text-soft"},a={class:"row justify-content-center"},s={class:"col"},d={class:"position-relative mb-5"},i=Object(n["createElementVNode"])("div",{class:"progress",style:{height:"1px"}},null,-1),b=Object(n["createElementVNode"])("button",{type:"button",class:"ms-5 position-absolute top-0 start-0 translate-middle btn btn-sm btn-soft rounded-pill",style:{width:"3rem",height:"3rem"}}," step 1",-1),u=Object(n["createElementVNode"])("button",{type:"button",class:"position-absolute top-0 start-50 translate-middle btn btn-sm btn-soft rounded-pill",style:{width:"3rem",height:"3rem"}}," step 2",-1),m={key:0,type:"button",class:"ms-n5 position-absolute top-0 start-100 translate-middle btn btn-sm btn-secondary disabled rounded-pill",style:{width:"3rem",height:"3rem"}},p={key:1,type:"button",class:"ms-n5 position-absolute top-0 start-100 translate-middle btn btn-sm btn-soft rounded-pill",style:{width:"3rem",height:"3rem"}},O={class:"container mt-5"},j={class:"mb-5 row flex-column flex-md-row justify-content-center"},h={class:"col-12 col-md-6"},f={class:"table align-middle col-md-6"},E=Object(n["createElementVNode"])("thead",null,[Object(n["createElementVNode"])("th",null,"品名"),Object(n["createElementVNode"])("th",null,"數量"),Object(n["createElementVNode"])("th",null,"單價")],-1),y={class:"text-end"},N=Object(n["createElementVNode"])("td",{colspan:"2",class:"text-end"},"總計",-1),V={class:"text-end"},g={class:"col-12 col-md-6"},v={class:"table"},k=Object(n["createElementVNode"])("th",{width:"100"},"Email",-1),x=Object(n["createElementVNode"])("th",null,"姓名",-1),B=Object(n["createElementVNode"])("th",null,"收件人電話",-1),w=Object(n["createElementVNode"])("th",null,"收件人地址",-1),S=Object(n["createElementVNode"])("th",null,"付款狀態",-1),D={key:0,class:"text-danger"},C={key:1,class:"text-success"},_={class:"checkBtn d-flex justify-content-end"},I=Object(n["createTextVNode"])("繼續購物"),L={key:0};function $(e,t,c,$,T,F){var J=Object(n["resolveComponent"])("Loading"),M=Object(n["resolveComponent"])("router-link");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createVNode"])(J,{active:T.isLoading},null,8,["active"]),Object(n["createElementVNode"])("div",o,[T.order.is_paid?(Object(n["openBlock"])(),Object(n["createElementBlock"])("h2",l,"STEP.3 完成訂單")):(Object(n["openBlock"])(),Object(n["createElementBlock"])("h2",r,"STEP.2 建立訂單")),Object(n["createElementVNode"])("div",a,[Object(n["createElementVNode"])("div",s,[Object(n["createElementVNode"])("div",d,[i,b,u,T.order.is_paid?(Object(n["openBlock"])(),Object(n["createElementBlock"])("button",p," step 3")):(Object(n["openBlock"])(),Object(n["createElementBlock"])("button",m," step 3"))])])])]),Object(n["createElementVNode"])("div",O,[Object(n["createElementVNode"])("div",j,[Object(n["createElementVNode"])("div",h,[Object(n["createElementVNode"])("form",{class:"col",onSubmit:t[0]||(t[0]=Object(n["withModifiers"])((function(){return F.payOrder&&F.payOrder.apply(F,arguments)}),["prevent"]))},[Object(n["createElementVNode"])("table",f,[E,Object(n["createElementVNode"])("tbody",null,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(T.order.products,(function(t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",{key:t.id},[Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(t.product.title),1),Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(t.qty)+"/"+Object(n["toDisplayString"])(t.product.unit),1),Object(n["createElementVNode"])("td",y,Object(n["toDisplayString"])(e.$filters.currency(t.final_total)),1)])})),128))]),Object(n["createElementVNode"])("tfoot",null,[Object(n["createElementVNode"])("tr",null,[N,Object(n["createElementVNode"])("td",V,Object(n["toDisplayString"])(e.$filters.currency(T.order.total)),1)])])])],32)]),Object(n["createElementVNode"])("div",g,[Object(n["createElementVNode"])("table",v,[Object(n["createElementVNode"])("tbody",null,[Object(n["createElementVNode"])("tr",null,[k,Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(T.order.user.email),1)]),Object(n["createElementVNode"])("tr",null,[x,Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(T.order.user.name),1)]),Object(n["createElementVNode"])("tr",null,[B,Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(T.order.user.tel),1)]),Object(n["createElementVNode"])("tr",null,[w,Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(T.order.user.address),1)]),Object(n["createElementVNode"])("tr",null,[S,Object(n["createElementVNode"])("td",null,[T.order.is_paid?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",C,"付款完成")):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",D,"尚未付款"))])])])]),Object(n["createElementVNode"])("div",_,[Object(n["createVNode"])(M,{class:"btn btn-outline-secondary",to:"/products"},{default:Object(n["withCtx"])((function(){return[I]})),_:1}),!1===T.order.is_paid?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",L,[Object(n["createElementVNode"])("button",{class:"btn btn-soft",onClick:t[1]||(t[1]=function(){return F.payOrder&&F.payOrder.apply(F,arguments)})},"確認付款去")])):Object(n["createCommentVNode"])("",!0)])])])])],64)}c("99af");var T=c("cfb9"),F={data:function(){return{order:{user:{}},orderId:"",isLoading:!1}},methods:{getCarts:function(){var e=this;this.isLoading=!0,this.$http.get("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("jiangs2022vue3","/cart")).then((function(t){e.isLoading=!1,console.log("購物車：",t),e.cartData=t.data.data}))},getOrder:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("jiangs2022vue3","/order/").concat(this.orderId);this.$http.get(t).then((function(t){t.data.success&&(e.order=t.data.order,console.log(e.order))}))},payOrder:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("jiangs2022vue3","/pay/").concat(this.orderId);this.$http.post(t).then((function(t){console.log(t),t.data.success&&(e.order.is_paid=!0,console.log(e.order.is_paid),e.getOrder(),e.getCarts(),T["a"].emit("update-cart"))}))}},created:function(){this.orderId=this.$route.params.orderId,console.log(this.orderId),this.getOrder()}},J=c("6b0d"),M=c.n(J);const P=M()(F,[["render",$]]);t["default"]=P},"1dde":function(e,t,c){var n=c("d039"),o=c("b622"),r=c("2d00"),l=o("species");e.exports=function(e){return r>=51||!n((function(){var t=[],c=t.constructor={};return c[l]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},8418:function(e,t,c){"use strict";var n=c("a04b"),o=c("9bf2"),r=c("5c6c");e.exports=function(e,t,c){var l=n(t);l in e?o.f(e,l,r(0,c)):e[l]=c}},"99af":function(e,t,c){"use strict";var n=c("23e7"),o=c("da84"),r=c("d039"),l=c("e8b5"),a=c("861d"),s=c("7b0b"),d=c("07fa"),i=c("8418"),b=c("65f0"),u=c("1dde"),m=c("b622"),p=c("2d00"),O=m("isConcatSpreadable"),j=9007199254740991,h="Maximum allowed index exceeded",f=o.TypeError,E=p>=51||!r((function(){var e=[];return e[O]=!1,e.concat()[0]!==e})),y=u("concat"),N=function(e){if(!a(e))return!1;var t=e[O];return void 0!==t?!!t:l(e)},V=!E||!y;n({target:"Array",proto:!0,forced:V},{concat:function(e){var t,c,n,o,r,l=s(this),a=b(l,0),u=0;for(t=-1,n=arguments.length;t<n;t++)if(r=-1===t?l:arguments[t],N(r)){if(o=d(r),u+o>j)throw f(h);for(c=0;c<o;c++,u++)c in r&&i(a,u,r[c])}else{if(u>=j)throw f(h);i(a,u++,r)}return a.length=u,a}})},b0c0:function(e,t,c){var n=c("83ab"),o=c("5e77").EXISTS,r=c("e330"),l=c("9bf2").f,a=Function.prototype,s=r(a.toString),d=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,i=r(d.exec),b="name";n&&!o&&l(a,b,{configurable:!0,get:function(){try{return i(d,s(this))[1]}catch(e){return""}}})}}]);
//# sourceMappingURL=chunk-1b6b7bba.82ed11a6.js.map